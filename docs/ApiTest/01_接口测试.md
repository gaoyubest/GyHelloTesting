[TOC]

# 一、接口测试

接口测试是测试系统组件间接口的一种测试。
接口测试主要用于检测外部系统与系统之间以及内部各个子系统之间的交互点。
接口测试的重点是要检查数据的交换，传递和控制管理过程，以及系统间的相互逻辑依赖关系等。
从接口形式来看各种应用程序的API(最著名的Windows系统API)，硬件的驱动程序，数据库DAO层接口，及WebService 接口和Http Rest接口。
接口测试通常包括两类，底层模块之间的接口测试和上层服务接口测试。前者通常由开发工程师做单测覆盖，后者则通常由测试工程师测试保证。

# 二、接口测试原理

模拟客户端向服务器发送请求报文，服务器接受请求报文后对相应的报文做处理并向客户端返回应答，客户端再接受应答的一个过程（Request -> Response）。

[接口测试原理详解](https://www.cnblogs.com/linyu51/p/13139014.html)


# 四、接口测试分类

系统与系统之间的调用：银行会提供接口供电子商务网站调用，或者说支付宝会提供接口给百度外卖调用。
上层对下层服务的调用：如Service层会调用DAO层的接口，而应用层又会调用服务层提供的接口。
系统内的服务之间的调用：如注册用户时，先调用用户查询的服务，查看该用户是否已经注册


# 五、接口测试策略

检查： 接口设计检查，通过接口文档定义对接口交互数据做有效性检查，整数型数据位数、浮点型数据精度、字符串数据范围值等，要求客户端传入的整数型、浮点型、字 符串型数据及最大值和最小值都能作为服务端接口有效输入，确保服务端不会自动进行截断或四舍五入操作。(接口设计评审阶段即可进行)

接口依赖关系检查，通常用户的一个操作可能对应服务端调用多个接口完成，从业务操作角度来看，各种业务操作所涉及的多个接口之间调用进行测试。依赖关系检 查，主要通过接口的输出值为另一接口的输入值来实现的，因此在进行接口测试之前，需要分析所测试接口的输入值是通过客户端还是其他接口输出来获取的，在设 计测试用例时，加入接口的依赖关系说明以便于测试。

验证：接口输入/输出验证，服务端接口功能测试类似于单元测试，在设计测试用例时，侧重点在于接口模块输入/输出项的正确性验证，根据接服务端接口处理方式分类有多种：条件判断接口、数据查询接口、逻辑运算接口。

构造：接口测试过程，常常需要构造测试数据。通常是数据库插入，mock 接口，调用依赖接口，开发脚本工具批量等。

自动化：相对于UI层自动化测试，服务端接口的自动化测试更容易实施，较稳定且维护成本低。参考接口case的优先级做自动化覆盖，回归测试、线上监控等收益均较大。

v2-96b40a98f62e08dcac8bf77bc9bf0092_b.jpg
1.接口测试关注点？
入参数据：每个接口入参的默认值、异常类型、非空交易。 参数是否有默认值，若没有，接口逻辑是如何处理的；参数必须输入值，若不输入或输入错误，接口如何返回；接口报错，服务端和客户端是否都做了容错处理。
出参返回：接口返回数据是否正确。
页码页数的异常值：接口有翻页时，如：第一页有数据，翻到第二页。第二页的数据是否与第一页重复，第二页接口是否报错，页码、页数，传很大的值，接口是否报错。
数据库增删改查，如对某接口post请求后，对列表页接口刷新请求，新数据是否与post数据一致。典型case，发布评论，post请求后是否返回评论数据，若无则检查是否缓存未写入数据库导致。
参数个数：入参支持多个值时，考虑传值个数多的情况，接口是否报错，接口应返回友好提示。
参数类型：输入参数类型必须校验，输出参数必须正确。即是int类型的，不能返回string类型。
排序：列表页接口应考虑排序值，升降序、时间排序等是否正确。
版本兼容：接口的改动（增加、减少字段）需要兼容老版本。
参数联动性：校验返回的多个参数的实际结果是否符合需求，如：返回一个商户的列表，总数字段和列表数据是否一致。
业务：从业务中来，到业务中去。接口测试是对业务逻辑的测试覆盖，对业务架构的理解。
2.接口测试Case设计？
Case参考点：输入参数测试，功能测试，逻辑测试，异常情况。

设计思路：a)优先级-针对所有接口，外部接口 > 系统内部核心接口 > 系统内部非核心接口。

b)优先级-针对单接口， 正向用例 > 逆向用例（通常情况，非绝对)；前置条件 > 默认参数 > 参数必填 > 参数关联 > 参数类型限制 > 参数数据范围限制。

Case覆盖：主流程 -> 分支流程 -> 异常流程。



# 六、API测试工具介绍

[接口测试及工具详解](https://blog.csdn.net/weixin_39742065/article/details/110468142)

API（Application Programming Interface） 的测试往往是使用 API 测试工具，比如常见的命令行工具 cURL、图形界面工具 Postman 或者 SoapUI、API 性能测试的 JMeter等。

代理抓包工具
Fillder, http://www.telerik.com/fiddler
Charles, https://www.charlesproxy.com/
Wireshark, https://www.wireshark.org/ 调试工具
Firebug(Firefox), https://addons.mozilla.org/en-US/firefox/addon/firebug/
DevTools(Chrome), https://github.com/CN-Chrome-DevTools/CN-Chrome-DevTools Json&Url encode工具
json在线解析,格式验证, http://json.cn/
json压缩转义, http://www.sojson.com/yasuo.html
jsonview插件(Chrome), https://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc?hl=zh-cn
url encode工具, http://tool.chinaz.com/Tools/URLEncode.aspx 测试工具
PostMan, https://chrome.google.com/webstore/detail/postman/
SoapUI, https://www.soapui.org/
Jmeter, http://jmeter.apache.org/
